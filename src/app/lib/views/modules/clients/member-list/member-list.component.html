<div class="clr-row">
  <div class="clr-col-12 lik-card">
    <app-view-header [title]="'Annuaire des Membres'|translate"
      [description]="'Consulter, modifier des informations et des statuts des membres'|translate"></app-view-header>
    <div class="data-container clr-row">
      <!-- Card Start -->
      <div class="clr-col-12 clr-data">
        <clr-tabs clrLayout="horizontal">
          <clr-tab>
            <button type="button" title="Personnes Morales" clrTabLink [translate]="'Personnes Morales'"></button>
            <clr-tab-content *clrIfActive>
              <app-moral-member-list [actionBarTemplate]="actionBarTemplate" [overflowTemplate]="dgOverflowTemplate"
                [detailPane]="detailPaneRef">
                <!-- Dg row details -->
                <ng-template let-item let-member="member" let-address="address" #detailPaneRef>
                  <moral-member>
                    <member-header class="tab-header" [member]="member" [editable]="false">
                    </member-header>
                    <moral-member-metadata class="tab-metadata" [metadata]="item"></moral-member-metadata>
                    <member-address class="tab-address" [address]="address"></member-address>
                    <app-stake-holders-list class="tab-beneficiaries" [representative]="false" [member]="member.id"
                      [membernumber]="member.accountNumber" [has-loading]="false"></app-stake-holders-list>
                    <app-stake-holders-list class="tab-representatives" [representative]="true" [member]="member.id"
                      [membernumber]="member.accountNumber" [has-loading]="false"></app-stake-holders-list>
                  </moral-member>
                </ng-template>
              </app-moral-member-list>
              <!--\ Dg row details -->
            </clr-tab-content>
          </clr-tab>

          <clr-tab>
            <button type="button" title="Personnes physiques" clrTabLink [translate]="'Personnes physiques'"></button>
            <clr-tab-content *clrIfActive>
              <app-individual-member-list [actionBarTemplate]="actionBarTemplate"
                [overflowTemplate]="dgOverflowTemplate" [detailPane]="detailPaneRef">
                <!-- Dg row details -->
                <ng-template let-item let-member="member" let-address="address" let-personal="personal" #detailPaneRef>
                  <individual-member>
                    <member-header class="tab-header" [member]="member" [editable]="false" [avatar]="avatarRef">
                      <ng-template #avatarRef>
                        <div class="flex-center">
                          <svg-icons color="#4f4f4f" shape="avatar" size="x-lg"></svg-icons>
                        </div>
                      </ng-template>
                    </member-header>
                    <member-address class="tab-address" [address]="address"></member-address>
                    <individual-member-metadata class="tab-metadata" [data]="personal"
                      [editable]="false"></individual-member-metadata>
                    <app-stake-holders-list class="tab-beneficiaries" [representative]="false" [member]="member.id"
                      [membernumber]="member.accountNumber" [has-loading]="false"></app-stake-holders-list>
                    <app-stake-holders-list class="tab-representatives" [representative]="true" [member]="member.id"
                      [membernumber]="member.accountNumber" [has-loading]="false"></app-stake-holders-list>
                  </individual-member>
                </ng-template>
              </app-individual-member-list>
              <!--\ Dg row details -->
            </clr-tab-content>
          </clr-tab>
        </clr-tabs>
      </div>
      <!-- Card End -->
    </div>
  </div>
</div>

<ng-template #actionBarTemplate let-selected="selected" let-refresh="refresh" let-create="create">
  <div class="btn-group">
    <button type="button" class="btn btn-sm btn-primary" (click)="create($event)">
      <clr-icon shape="plus"></clr-icon>
      {{ 'new' | translate | uppercase }}
    </button>
    <button type="button" class="btn btn-sm btn-primary" (click)="refresh($event)">
      <clr-icon shape="refresh"></clr-icon>
      {{ 'refresh' | translate | uppercase }}
    </button>
  </div>
</ng-template>

<ng-template #dgOverflowTemplate let-item="item" let-detailsClick="detailsClick" let-updateDetails="updateDetails"
  let-updateStatus="updateStatus">
  <button type="button" class="action-item">
    <!-- <clr-icon shape="user"></clr-icon> -->
    {{' Fiche signalétique' | translate | uppercase}}
  </button>
  <button type="button" class="action-item">
    <!-- <clr-icon shape="edit"></clr-icon> -->
    {{'Modifier infos'| translate | uppercase}}
  </button>
  <button type="button" class="action-item">
    <!-- <clr-icon shape="tasks"></clr-icon> -->
    {{'Changer statut' | translate | uppercase}}
  </button>
  <button type="button" class="action-item">
    <!-- <clr-icon shape="close"></clr-icon> -->
    {{'Clotûrer Dossier'| translate | uppercase}}
  </button>
  <button type="button" (click)="onUpdateMembersipStatus()" class="action-item">
    {{ "deactivate" | translate | uppercase }}
  </button>
</ng-template>