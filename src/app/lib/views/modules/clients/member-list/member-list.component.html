<div class="clr-row">
  <div class="clr-col-12 lik-card">
    <div class="lik-card-title" [translate]="'Annuaire des Membres'"></div>
    <div class="lik-card-description" [translate]="
        'Consulter, modifier des informations et des statuts des membres'
      "></div>
    <div class="divider"></div>
    <div class="data-container clr-row">
      <!-- Card Start -->
      <div class="clr-col-12 clr-data">
        <clr-tabs clrLayout="horizontal">
          <clr-tab>
            <button type="button" title="Personnes Morales" clrTabLink [translate]="'Personnes Morales'"></button>
            <clr-tab-content *clrIfActive>
              <app-moral-member-list [actionBarTemplate]="actionBarTemplate" [overflowTemplate]="dgOverflowTemplate"
                [expandedRowTemplate]="moralMemberStakeHolderList">
                <!-- Expanded row -->
                <ng-template #moralMemberStakeHolderList let-item>
                  <app-stake-holders-list [member]="item.id" [membernumber]="item.number"
                    [has-loading]="false"></app-stake-holders-list>
                </ng-template>
                <!-- Expanded row -->
              </app-moral-member-list>
            </clr-tab-content>
          </clr-tab>

          <clr-tab>
            <button type="button" title="Personnes physiques" clrTabLink [translate]="'Personnes physiques'"></button>
            <clr-tab-content *clrIfActive>
              <app-individual-member-list [actionBarTemplate]="actionBarTemplate"
                [overflowTemplate]="dgOverflowTemplate" [expandedRowTemplate]="physicalMemberStakeHolderList">
                <!-- Expanded row -->
                <ng-template #physicalMemberStakeHolderList let-item>
                  <app-stake-holders-list [member]="item.id" [membernumber]="item.number"
                    [has-loading]="false"></app-stake-holders-list>
                </ng-template>
                <!-- Expanded row --></app-individual-member-list>
            </clr-tab-content>
          </clr-tab>
        </clr-tabs>
      </div>
      <!-- Card End -->
    </div>
  </div>
</div>

<ng-template #actionBarTemplate let-selected="selected" let-refresh="refresh" let-create="create">
  <div class="btn-group">
    <button type="button" class="btn btn-sm btn-primary" (click)="create($event)">
      <clr-icon shape="plus"></clr-icon>
      {{ 'new' | translate | uppercase }}
    </button>
    <button type="button" class="btn btn-sm btn-primary" (click)="refresh($event)">
      <clr-icon shape="refresh"></clr-icon>
      {{ 'refresh' | translate | uppercase }}
    </button>
  </div>
</ng-template>

<ng-template #dgOverflowTemplate let-item="item" let-detailsClick="detailsClick" let-updateDetails="updateDetails"
  let-updateStatus="updateStatus">
  <button type="button" class="action-item">
    <clr-icon shape="user"></clr-icon>
    Fiche signalétique
  </button>
  <button type="button" class="action-item">
    <clr-icon shape="edit"></clr-icon>
    Modifier infos
  </button>
  <button type="button" class="action-item">
    <clr-icon shape="tasks"></clr-icon>
    Changer statut
  </button>
  <button type="button" class="action-item">
    <clr-icon shape="close"></clr-icon>
    Clotûrer Dossier
  </button>
  <button type="button" (click)="onUpdateMembersipStatus()" class="action-item">
    {{ "deactivate" | translate | uppercase }}
  </button>
</ng-template>